<html>
<head>
<title>Node.java</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<style type="text/css">
.ln { color: #999999; font-weight: normal; font-style: normal; }
.s0 { color: rgb(0,0,128); font-weight: bold; }
.s1 { color: rgb(0,0,0); }
.s2 { color: rgb(128,128,128); font-style: italic; }
.s3 { color: rgb(0,0,255); }
</style>
</head>
<BODY BGCOLOR="#ffffff">
<TABLE CELLSPACING=0 CELLPADDING=5 COLS=1 WIDTH="100%" BGCOLOR="#c0c0c0" >
<TR><TD><CENTER>
<FONT FACE="Arial, Helvetica" COLOR="#000000">
Node.java</FONT>
</center></TD></TR></TABLE>
<pre>
<span class="s0">package </span><span class="s1">brutetsp; 
 
</span><span class="s0">import </span><span class="s1">java.util.ArrayList; 
</span><span class="s0">import </span><span class="s1">java.util.List; 
</span><span class="s0">import </span><span class="s1">java.util.Random; 
 
</span><span class="s2">/** 
 * Created by Simon on 1/5/17. 
 * This object is the primary component of the TSP process. It holds a randomly generated set of 24 speed values (one 
 * for each hour) and a distance value for how far the two vertices are apart. A node in this case represents an edge. 
 */</span><span class="s1"> 
</span><span class="s0">public class </span><span class="s1">Node { 
    List&lt;Double&gt; speeds = </span><span class="s0">new </span><span class="s1">ArrayList&lt;&gt;(); 
    </span><span class="s0">double </span><span class="s1">distance; 
    </span><span class="s0">boolean </span><span class="s1">ignore; </span><span class="s2">// Used to</span><span class="s1"> 
 
    </span><span class="s2">// Create an empty node: used for loop edges</span><span class="s1"> 
    Node() { 
        distance = </span><span class="s3">0</span><span class="s1">; 
        ignore = </span><span class="s0">true</span><span class="s1">; 
    } 
 
    </span><span class="s2">// Create a node using a given list of speeds n and distance d</span><span class="s1"> 
    Node(List&lt;Double&gt; n, </span><span class="s0">double </span><span class="s1">d) { 
        distance = d; 
        speeds = n; 
        ignore = </span><span class="s0">false</span><span class="s1">; 
    } 
 
    </span><span class="s2">// Create a node with distance d and randomized speeds with rush hour traffic incorporated</span><span class="s1"> 
    Node(</span><span class="s0">double </span><span class="s1">d, </span><span class="s0">int </span><span class="s1">highway) { 
        distance = d; 
        Random random = </span><span class="s0">new </span><span class="s1">Random(); 
        List&lt;Double&gt; n = </span><span class="s0">new </span><span class="s1">ArrayList&lt;&gt;(); 
        </span><span class="s0">for </span><span class="s1">(</span><span class="s0">int </span><span class="s1">i = </span><span class="s3">0</span><span class="s1">; i &lt; </span><span class="s3">24</span><span class="s1">; i++) { 
            </span><span class="s0">if </span><span class="s1">(Math.abs(i - </span><span class="s3">8</span><span class="s1">) &lt;= </span><span class="s3">2 </span><span class="s1">|| Math.abs(i-</span><span class="s3">18</span><span class="s1">) &lt;= </span><span class="s3">2</span><span class="s1">) { 
                n.add(highway - (</span><span class="s0">double</span><span class="s1">)random.nextInt(</span><span class="s3">30</span><span class="s1">) - </span><span class="s3">15</span><span class="s1">); 
            } </span><span class="s0">else </span><span class="s1">{ 
                n.add(highway + (</span><span class="s0">double</span><span class="s1">)random.nextInt(</span><span class="s3">30</span><span class="s1">) - </span><span class="s3">15</span><span class="s1">); 
            } 
        } 
        speeds = n; 
        ignore = </span><span class="s0">false</span><span class="s1">; 
    } 
 
    </span><span class="s2">// Create a node with distance d and randomized speeds between min and max</span><span class="s1"> 
    Node(</span><span class="s0">double </span><span class="s1">d, </span><span class="s0">int </span><span class="s1">min, </span><span class="s0">int </span><span class="s1">max) { 
        distance = d; 
        Random random = </span><span class="s0">new </span><span class="s1">Random(); 
        List&lt;Double&gt; n = </span><span class="s0">new </span><span class="s1">ArrayList&lt;&gt;(); 
        </span><span class="s0">for </span><span class="s1">(</span><span class="s0">int </span><span class="s1">i = </span><span class="s3">0</span><span class="s1">; i &lt; </span><span class="s3">24</span><span class="s1">; i++) { 
            n.add((</span><span class="s0">double</span><span class="s1">)random.nextInt(max - min + </span><span class="s3">1</span><span class="s1">) + min); 
        } 
        speeds = n; 
        ignore = </span><span class="s0">false</span><span class="s1">; 
    } 
 
    </span><span class="s2">// Return time it takes to traverse the distance of a node given a certain start time</span><span class="s1"> 
    </span><span class="s0">public double </span><span class="s1">time(</span><span class="s0">double </span><span class="s1">start) { 
        </span><span class="s0">if </span><span class="s1">(!ignore) { </span><span class="s2">// filters out null nodes</span><span class="s1"> 
            </span><span class="s0">int </span><span class="s1">startModInt = (</span><span class="s0">int</span><span class="s1">) (start % </span><span class="s3">24</span><span class="s1">); 
            </span><span class="s0">int </span><span class="s1">curModInt = startModInt % </span><span class="s3">24</span><span class="s1">; 
            </span><span class="s0">double </span><span class="s1">curModDouble = start % </span><span class="s3">24</span><span class="s1">; 
            </span><span class="s0">double </span><span class="s1">distanceMoved = </span><span class="s3">0</span><span class="s1">; 
            </span><span class="s0">double </span><span class="s1">distanceLeft = distance - distanceMoved; 
            </span><span class="s0">double </span><span class="s1">timeInc; 
            </span><span class="s0">double </span><span class="s1">finalTime; 
            </span><span class="s0">double </span><span class="s1">timeTotal = </span><span class="s3">0</span><span class="s1">; 
            </span><span class="s0">boolean </span><span class="s1">done = </span><span class="s0">false</span><span class="s1">; 
 
            </span><span class="s2">// Constantly refreshes finalTime until distance of node has been traveled</span><span class="s1"> 
            </span><span class="s0">while </span><span class="s1">(!done) { 
                </span><span class="s0">if </span><span class="s1">(curModInt == </span><span class="s3">24</span><span class="s1">) { 
                    curModInt = </span><span class="s3">0</span><span class="s1">; 
                } 
                </span><span class="s0">if </span><span class="s1">(curModDouble == </span><span class="s3">24</span><span class="s1">) { 
                    curModDouble = </span><span class="s3">0</span><span class="s1">; 
                } 
                </span><span class="s0">if </span><span class="s1">(speeds.get(curModInt) * ((curModInt + </span><span class="s3">1</span><span class="s1">) - curModDouble) &gt;= distanceLeft) { 
                    timeInc = distanceLeft / speeds.get(curModInt); 
                    timeTotal += timeInc; 
                    distanceMoved = distance; 
                    distanceLeft = </span><span class="s3">0</span><span class="s1">; 
                    done = </span><span class="s0">true</span><span class="s1">; 
                } </span><span class="s0">else </span><span class="s1">{ 
                    timeInc = curModInt + </span><span class="s3">1 </span><span class="s1">- curModDouble; 
                    timeTotal += timeInc; 
                    distanceMoved += timeInc * speeds.get(curModInt); 
                    distanceLeft = distance - distanceMoved; 
                    curModInt++; 
                    curModDouble = curModInt; 
                } 
            } 
            finalTime = start + timeTotal; 
            </span><span class="s0">return </span><span class="s1">finalTime; 
        } 
        </span><span class="s0">return </span><span class="s3">0</span><span class="s1">; 
    } 
} 
</span></pre>
</body>
</html>